{% extends 'base.html' %}
{% load static %}

{% block title %}Checkout - Sagitario Store{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/checkout.css' %}">
{% endblock %}

{% block content %}
<main class="container">
    <h1>Finalizar Compra</h1>

    <div class="checkout-container">
        <div class="checkout-form">
            <form method="POST" action="{% url 'pedidos:checkout' %}">
                {% csrf_token %}
                
                <section class="shipping-info">
                    <h2>Información de Envío</h2>
                    <div class="form-group">
                        <label for="nombre">Nombre completo</label>
                        <input type="text" id="nombre" name="nombre" required>
                    </div>
                    <div class="form-group">
                        <label for="direccion">Dirección</label>
                        <input type="text" id="direccion" name="direccion" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ciudad">Ciudad</label>
                            <input type="text" id="ciudad" name="ciudad" required>
                        </div>
                        <div class="form-group">
                            <label for="telefono">Teléfono</label>
                            <input type="tel" id="telefono" name="telefono" required>
                        </div>
                    </div>
                </section>

                <section class="payment-info">
                    <h2>Información de Pago</h2>
                    <div class="form-group">
                        <label for="metodo_pago">Método de pago</label>
                        <select id="metodo_pago" name="metodo_pago" required>
                            <option value="">Seleccione un método de pago</option>
                            <option value="transferencia">Transferencia Bancaria</option>
                            <option value="qr">Pago QR</option>
                            <option value="efectivo">Pago en Efectivo</option>
                        </select>
                    </div>
                </section>

                <section class="order-summary">
                    <h2>Resumen del Pedido</h2>
                    <div class="cart-items">
                        {% for item in cart_items %}
                        <div class="cart-item">
                            <span>{{ item.producto.nombre }} x {{ item.cantidad }}</span>
                            <span>{{ item.subtotal }} Bs</span>
                        </div>
                        {% endfor %}
                    </div>
                    <div class="order-total">
                        <strong>Total:</strong>
                        <span>{{ total }} Bs</span>
                    </div>
                </section>

                <div class="checkout-actions">
                    <a href="{% url 'carrito:ver_carrito' %}" class="btn btn-secondary">Volver al Carrito</a>
                    <button type="submit" class="btn btn-primary">Confirmar Pedido</button>
                </div>
            </form>
        </div>
    </div>
</main>
{% endblock %}